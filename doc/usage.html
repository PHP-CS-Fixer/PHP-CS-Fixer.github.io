<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="PHP Coding Standards Fixer">
    
    <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />


    <link href="../_static/css/reset-min.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/base.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/code.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/colors.css" rel="stylesheet" type="text/css">
    <link href="../_static/pygments.css" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css">
      <link rel="stylesheet" href="../_static/" type="text/css">
      <title>Usage - PHP Coding Standards Fixer</title>

    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-32006827-2']);
      _gaq.push(['_trackPageview']);

      (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script> 
  </head>
  <body>
      <header class="hd">
        <div class="illustration png_fix">
          <a href="https://github.com/PHP-CS-Fixer/PHP-CS-Fixer" class="github-ribbon">Fork me on GitHub</a>
          <div class="content">
            <div class="sensio_product">
              <img class="png_fix" src="../_static/images/sensio-labs-product.png" alt="a Sensio Labs Product" />
            </div>
            <div class="clearfix">
              <div class="logo_header"><a href="/">PHP Coding Standards Fixer</a></div>
              <h1 class="title_header">
                <strong>15 Keys (v3.52.0)</strong> edition
              </h1>
            </div>
          </div>
        </div>
      </header>
    
      <main class="bd">
        <div class="content">
          <div class="links_intro">
            <ul>
              <li>
                <a href="./download/php-cs-fixer-v3.phar" class="download-button">
                  Install now
                  <svg viewBox="0 0 24 24">
                    <path d="M13 3h-2v14.3l-4.7-4.6L5 14l5.7 5.6 1.4 1.4 1.4-1.4 5.7-5.6-1.4-1.4-4.7 4.6V3Z"/>
                  </svg>
                </a>
              </li>
            </ul>
          </div>
          <div class="more_intro">
            
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h1>
<section id="the-fix-command">
<h2>The <code class="docutils literal notranslate"><span class="pre">fix</span></code> command<a class="headerlink" href="#the-fix-command" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">fix</span></code> command tries to fix as much coding standards
problems as possible.</p>
<p>With config file created, you can run command as easy as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix</span>
</pre></div>
</div>
<p>If you do not have config file, you can run following command to fix non-hidden, non-vendor/ PHP files with default ruleset &#64;PSR12:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix .</span>
</pre></div>
</div>
<p>With some magic of tools provided by your OS, you can also fix files in parallel:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar list-files --config=.php-cs-fixer.dist.php | xargs -n 50 -P 8 php php-cs-fixer.phar fix --config=.php-cs-fixer.dist.php --path-mode intersection -v</span>
</pre></div>
</div>
<p>You can limit process to given file or files in a given directory and its subdirectories:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/dir</span>
<span class="go">php php-cs-fixer.phar fix /path/to/file</span>
</pre></div>
</div>
<p>By default <code class="docutils literal notranslate"><span class="pre">--path-mode</span></code> is set to <code class="docutils literal notranslate"><span class="pre">override</span></code>, which means, that if you specify the path to a file or a directory via
command arguments, then the paths provided to a <code class="docutils literal notranslate"><span class="pre">Finder</span></code> in config file will be ignored. You can also use <code class="docutils literal notranslate"><span class="pre">--path-mode=intersection</span></code>,
which will use the intersection of the paths from the config file and from the argument:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix --path-mode=intersection /path/to/dir</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--format</span></code> option for the output format. Supported formats are <code class="docutils literal notranslate"><span class="pre">txt</span></code> (default one), <code class="docutils literal notranslate"><span class="pre">checkstyle</span></code>, <code class="docutils literal notranslate"><span class="pre">gitlab</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code>, <code class="docutils literal notranslate"><span class="pre">junit</span></code> and <code class="docutils literal notranslate"><span class="pre">xml</span></code>.</p>
<p>NOTE: the output for the following formats are generated in accordance with schemas</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">checkstyle</span></code> follows the common <a class="reference external" href="/doc/schemas/fix/checkstyle.xsd">“checkstyle” XML schema</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gitlab</span></code> follows the <a class="reference external" href="/doc/schemas/fix/codeclimate.json">codeclimate JSON schema</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">json</span></code> follows the <a class="reference external" href="/doc/schemas/fix/schema.json">own JSON schema</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">junit</span></code> follows the <a class="reference external" href="/doc/schemas/fix/junit-10.xsd">JUnit XML schema from Jenkins</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xml</span></code> follows the <a class="reference external" href="/doc/schemas/fix/xml.xsd">own XML schema</a></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> Do not output any message.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option will show the applied rules. When using the <code class="docutils literal notranslate"><span class="pre">txt</span></code> format it will also display progress output (progress bar by default, but can be changed using <code class="docutils literal notranslate"><span class="pre">--show-progress</span></code> option).</p>
<p>NOTE: if there is an error like “errors reported during linting after fixing”, you can use this to be even more verbose for debugging purpose</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span></code>: verbose</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-vv</span></code>: very verbose</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-vvv</span></code>: debug</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">--rules</span></code> option limits the rules to apply to the
project:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/project --rules=@PSR12</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal notranslate"><span class="pre">PSR12</span></code> rules are used. If the <code class="docutils literal notranslate"><span class="pre">--rules</span></code> option is used rules from config files are ignored.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--rules</span></code> option lets you choose the exact rules to apply (the rule names must be separated by a comma):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/dir --rules=line_ending,full_opening_tag,indentation_type</span>
</pre></div>
</div>
<p>You can also exclude the rules you don’t want by placing a dash in front of the rule name, if this is more convenient,
using <code class="docutils literal notranslate"><span class="pre">-name_of_fixer</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/dir --rules=-full_opening_tag,-indentation_type</span>
</pre></div>
</div>
<p>When using combinations of exact and exclude rules, applying exact rules along with above excluded results:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/project --rules=@Symfony,-@PSR1,-blank_line_before_statement,strict_comparison</span>
</pre></div>
</div>
<p>Complete configuration for rules can be supplied using a <code class="docutils literal notranslate"><span class="pre">json</span></code> formatted string.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/project --rules=&#39;{&quot;concat_space&quot;: {&quot;spacing&quot;: &quot;none&quot;}}&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> flag will run the fixer without making changes to your files (implicitly set when you use <code class="docutils literal notranslate"><span class="pre">check</span></code> command).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--diff</span></code> flag can be used to let the fixer output all the changes it makes in <code class="docutils literal notranslate"><span class="pre">udiff</span></code> format.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--allow-risky</span></code> option (pass <code class="docutils literal notranslate"><span class="pre">yes</span></code> or <code class="docutils literal notranslate"><span class="pre">no</span></code>) allows you to set whether risky rules may run. Default value is taken from config file.
A rule is considered risky if it could change code behaviour. By default no risky rules are run.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--stop-on-violation</span></code> flag stops the execution upon first file that needs to be fixed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--show-progress</span></code> option allows you to choose the way process progress is rendered:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code>: disables progress output;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dots</span></code>: multiline progress output with number of files and percentage on each line. Note that with this option, the files list is evaluated before processing to get the total number of files and then kept in memory to avoid using the file iterator twice. This has an impact on memory usage so using this option is not recommended on very large projects;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bar</span></code>: single line progress output with number of files and calculated percentage. Similar to <code class="docutils literal notranslate"><span class="pre">dots</span></code> output, it has to evaluate files list twice;</p></li>
</ul>
<p>If the option is not provided, it defaults to <code class="docutils literal notranslate"><span class="pre">bar</span></code> unless a config file that disables output, or non-txt reporter is used, then it defaults to <code class="docutils literal notranslate"><span class="pre">none</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix --verbose --show-progress=dots</span>
</pre></div>
</div>
<p>The command can also read from standard input, in which case it won’t
automatically fix anything:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cat foo.php | php php-cs-fixer.phar fix --diff -</span>
</pre></div>
</div>
<p>Finally, if you don’t need BC kept on CLI level, you might use <code class="docutils literal notranslate"><span class="pre">PHP_CS_FIXER_FUTURE_MODE</span></code> to start using options that
would be default in next MAJOR release and to forbid using deprecated configuration:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PHP_CS_FIXER_FUTURE_MODE=1 php php-cs-fixer.phar fix -v --diff</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> option displays the files that need to be
fixed but without actually modifying them:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar fix /path/to/code --dry-run</span>
</pre></div>
</div>
<p>By using <code class="docutils literal notranslate"><span class="pre">--using-cache</span></code> option with <code class="docutils literal notranslate"><span class="pre">yes</span></code> or <code class="docutils literal notranslate"><span class="pre">no</span></code> you can set if the caching
mechanism should be used.</p>
</section>
<section id="the-check-command">
<h2>The <code class="docutils literal notranslate"><span class="pre">check</span></code> command<a class="headerlink" href="#the-check-command" title="Permalink to this heading">¶</a></h2>
<p>This command is a shorthand for <code class="docutils literal notranslate"><span class="pre">fix</span> <span class="pre">--dry-run</span></code> and offers all the options and arguments as <code class="docutils literal notranslate"><span class="pre">fix</span></code> command.
The only difference is that <code class="docutils literal notranslate"><span class="pre">check</span></code> command won’t apply any changes, but will only print analysis result.</p>
</section>
<section id="the-list-files-command">
<h2>The <code class="docutils literal notranslate"><span class="pre">list-files</span></code> command<a class="headerlink" href="#the-list-files-command" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">list-files</span></code> command will list all files which need fixing.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar list-files</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--config</span></code> option can be used, like in the <code class="docutils literal notranslate"><span class="pre">fix</span></code> command, to tell from which path a config file should be loaded.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar list-files --config=.php-cs-fixer.dist.php</span>
</pre></div>
</div>
<p>The output is built in a form that its easy to use in combination with <code class="docutils literal notranslate"><span class="pre">xargs</span></code> command in a linux pipe.
This can be useful e.g. in situations where the caching mechanism might not be available (CI, Docker) and distribute
fixing across several processes might speedup the process.</p>
<p>Note: You need to pass the config to the <code class="docutils literal notranslate"><span class="pre">fix</span></code> command, in order to make it work with several files being passed by <code class="docutils literal notranslate"><span class="pre">list-files</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar list-files --config=.php-cs-fixer.dist.php | xargs -n 50 -P 8 php php-cs-fixer.phar fix --config=.php-cs-fixer.dist.php --path-mode intersection -v</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span></code> defines how many files a single subprocess process</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-P</span></code> defines how many subprocesses the shell is allowed to spawn for parallel processing (usually similar to the number of CPUs your system has)</p></li>
</ul>
</section>
<section id="rule-descriptions">
<h2>Rule descriptions<a class="headerlink" href="#rule-descriptions" title="Permalink to this heading">¶</a></h2>
<p>Use the following command to quickly understand what a rule will do to your code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar describe align_multiline_comment</span>
</pre></div>
</div>
<p>To visualize all the rules that belong to a ruleset:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">php php-cs-fixer.phar describe @PSR2</span>
</pre></div>
</div>
</section>
<section id="caching">
<h2>Caching<a class="headerlink" href="#caching" title="Permalink to this heading">¶</a></h2>
<p>The caching mechanism is enabled by default. This will speed up further runs by fixing only files that were modified
since the last run. The tool will fix all files if the tool version has changed or the list of rules has changed.
The cache is supported only when the tool was downloaded as a PHAR file, executed within pre-built Docker image
or installed via Composer. The cache is written to the drive progressively, so do not be afraid of interruption -
rerun the command and start where you left. The cache mechanism also supports executing the command in parallel.</p>
<p>Cache can be disabled via <code class="docutils literal notranslate"><span class="pre">--using-cache</span></code> option or config file:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PhpCsFixer\Config</span><span class="p">();</span>
<span class="k">return</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setUsingCache</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
<p>Cache file can be specified via <code class="docutils literal notranslate"><span class="pre">--cache-file</span></code> option or config file:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PhpCsFixer\Config</span><span class="p">();</span>
<span class="k">return</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setCacheFile</span><span class="p">(</span><span class="no">__DIR__</span><span class="o">.</span><span class="s1">&#39;/.php-cs-fixer.cache&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="using-php-cs-fixer-on-ci">
<h2>Using PHP CS Fixer on CI<a class="headerlink" href="#using-php-cs-fixer-on-ci" title="Permalink to this heading">¶</a></h2>
<p>Require <code class="docutils literal notranslate"><span class="pre">friendsofphp/php-cs-fixer</span></code> as a <code class="docutils literal notranslate"><span class="pre">dev</span></code> dependency:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./composer.phar require --dev friendsofphp/php-cs-fixer</span>
</pre></div>
</div>
<p>Then, add the following command to your CI:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">IFS=&#39;</span>
<span class="go">&#39;</span>
<span class="go">CHANGED_FILES=$(git diff --name-only --diff-filter=ACMRTUXB &quot;${COMMIT_RANGE}&quot;)</span>
<span class="go">if ! echo &quot;${CHANGED_FILES}&quot; | grep -qE &quot;^(\\.php-cs-fixer(\\.dist)?\\.php|composer\\.lock)$&quot;; then EXTRA_ARGS=$(printf -- &#39;--path-mode=intersection\n--\n%s&#39; &quot;${CHANGED_FILES}&quot;); else EXTRA_ARGS=&#39;&#39;; fi</span>
<span class="go">vendor/bin/php-cs-fixer check --config=.php-cs-fixer.dist.php -v --stop-on-violation --using-cache=no ${EXTRA_ARGS}</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">$COMMIT_RANGE</span></code> is your range of commits, e.g. <code class="docutils literal notranslate"><span class="pre">$TRAVIS_COMMIT_RANGE</span></code> or <code class="docutils literal notranslate"><span class="pre">HEAD~..HEAD</span></code>.</p>
<section id="gitlab-code-quality-integration">
<h3>GitLab Code Quality Integration<a class="headerlink" href="#gitlab-code-quality-integration" title="Permalink to this heading">¶</a></h3>
<p>If you want to integrate with GitLab’s Code Quality feature, in order for report to contain correct line numbers, you
will need to use both <code class="docutils literal notranslate"><span class="pre">--format=gitlab</span></code> and <code class="docutils literal notranslate"><span class="pre">--diff</span></code> arguments.</p>
</section>
</section>
<section id="environment-options">
<h2>Environment options<a class="headerlink" href="#environment-options" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">PHP_CS_FIXER_IGNORE_ENV</span></code> environment variable can be used to ignore any environment requirements.
This includes requirements like missing PHP extensions, unsupported PHP versions or by using HHVM.</p>
<p>NOTE: Execution may be unstable when used.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PHP_CS_FIXER_IGNORE_ENV=1 php php-cs-fixer.phar fix /path/to/dir</span>
</pre></div>
</div>
</section>
<section id="exit-code">
<h2>Exit code<a class="headerlink" href="#exit-code" title="Permalink to this heading">¶</a></h2>
<p>Exit code of the <code class="docutils literal notranslate"><span class="pre">fix</span></code> command is built using following bit flags:</p>
<ul class="simple">
<li><p>0 - OK.</p></li>
<li><p>1 - General error (or PHP minimal requirement not matched).</p></li>
<li><p>4 - Some files have invalid syntax (only in dry-run mode).</p></li>
<li><p>8 - Some files need fixing (only in dry-run mode).</p></li>
<li><p>16 - Configuration error of the application.</p></li>
<li><p>32 - Configuration error of a Fixer.</p></li>
<li><p>64 - Exception raised within the application.</p></li>
</ul>
</section>
</section>


          </div>
        </div>
      </main>
      <footer class="ft">
        <div class="content">
          The <a href="../_static/images/logo.png">logo</a> is &copy; 2010+ Sensio Labs
        </div>
      </footer>
  </body>
</html>