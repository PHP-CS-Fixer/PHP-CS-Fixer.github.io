<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="PHP Coding Standards Fixer">
    
    <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />


    <link href="../_static/css/reset-min.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/base.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/code.css" rel="stylesheet" type="text/css">
    <link href="../_static/css/colors.css" rel="stylesheet" type="text/css">
    <link href="../_static/pygments.css" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css">
      <link rel="stylesheet" href="../_static/" type="text/css">
      <title>Support for new PHP version - PHP Coding Standards Fixer</title> 
  </head>
  <body>
      <header class="hd">
        <div class="illustration png_fix">
          <a href="https://github.com/PHP-CS-Fixer/PHP-CS-Fixer" class="github-ribbon">Fork me on GitHub</a>
          <div class="content">
            <div class="sensio_product">
              <img class="png_fix" src="../_static/images/sensio-labs-product.png" alt="a Sensio Labs Product" />
            </div>
            <div class="clearfix">
              <div class="logo_header"><a href="/">PHP Coding Standards Fixer</a></div>
              <h1 class="title_header">
                <strong>Alexander (v3.87.0)</strong> edition
              </h1>
            </div>
          </div>
        </div>
      </header>
    
      <main class="bd">
        <div class="content">
          <div class="links_intro">
            <ul>
              <li>
                <a href="/download/php-cs-fixer-v3.phar" class="download-button">
                  Install now
                  <svg viewBox="0 0 24 24">
                    <path d="M13 3h-2v14.3l-4.7-4.6L5 14l5.7 5.6 1.4 1.4 1.4-1.4 5.7-5.6-1.4-1.4-4.7 4.6V3Z"/>
                  </svg>
                </a>
              </li>
            </ul>
          </div>
          <div class="more_intro">
            
  <section id="support-for-new-php-version">
<h1>Support for new PHP version<a class="headerlink" href="#support-for-new-php-version" title="Permalink to this heading">¶</a></h1>
<p>PHP CS Fixer is highly coupled with PHP built-in Tokenizer.
We recommend PHP CS Fixer to run on same PHP version as platform PHP version of codebase that is about to be fixed.</p>
<p>The fact that PHP CS Fixer can run under given PHP version doesn’t mean it will properly analyse and fix codebase
written in that version. Running the Fixer in that setup can cause harm and break the code.
Due to this, we prevent running PHP CS Fixer on any PHP that we didn’t explicitly declare compatibility with
(with option to opt-in into risky execution on newest PHP runtime).</p>
<p>Making PHP CS Fixer to support newly released PHP version may be a big task, depending on changes introduced in the
new PHP version around language syntax and internal PHP built-in Tokenizer. Tokenizer executed under different PHP
runtime may produce different result of same code source (even if code source is valid syntax under each of those runtimes).</p>
<p>In this document, we will use following shortcuts to refer a version:
- vX - highest supported PHP version, e.g., v8.3.x
- vY - not-yet supported PHP version, e.g., v8.4.x</p>
<p>Any new syntax in vY is a granted BC breaker for internal PHP Tokenizer.
Lack of new syntax in vY does not guarantee BC compatibility for internal PHP Tokenizer.</p>
<section id="st-phase">
<h2>1st phase<a class="headerlink" href="#st-phase" title="Permalink to this heading">¶</a></h2>
<p>1st phase is about checking if PHP CS Fixer executed under vY runtime work properly for &lt;= vX compatible source code.</p>
<p>We do it by adding vY to our own test matrix.</p>
<p>This does not guarantee that PHP CS Fixer will work properly for vY source code, but it’s a good start to prevent our own code incompatibilities or runtime.</p>
</section>
<section id="nd-phase-compatibility-support">
<h2>2nd phase - compatibility support<a class="headerlink" href="#nd-phase-compatibility-support" title="Permalink to this heading">¶</a></h2>
<p>2nd phase is about teaching PHP CS Fixer to not only run under vY runtime, but also to understand vY syntax.</p>
<p>Here, we want to first understand explicit or implicit Tokenizer changes:
- explicit change is when new PHP token is introduced - in such case we cover it under <a class="reference external" href="https://github.com/PHP-CS-Fixer/PHP-CS-Fixer/blob/v3.87.0/src/Tokenizer/FCT.php">Forward Compatibility Tokens</a> to simplify cross-php-version handling.
- implicit change is when PHP token is now having more possible contexts - in such case we separate it with dedicated <a class="reference external" href="https://github.com/PHP-CS-Fixer/PHP-CS-Fixer/blob/v3.87.0/src/Tokenizer/CT.php">Custom Tokens</a>. Doing it after declaring the official support for vY would be a BC breaker.</p>
<p>Then, we want to ensure compatibility. With high amount of rules, it’s not-likely to check every single combination of rules and vY syntax, so we focus to run newly introduced syntax as integration test against ruleset of “&#64;PhpCsFixer: true, PHPvYMigration:true” (<a class="reference external" href="./../tests/Fixtures/Integration/php_compat/">example</a>).</p>
<p>On that moment, we claim initial support for vY is completed and PHP CS Fixer can run on vY runtime as-is.
Any newly discovered incompatibility should be reported as a bug.</p>
</section>
<section id="rd-phase-coding-standards-support">
<h2>3rd phase - Coding Standards support<a class="headerlink" href="#rd-phase-coding-standards-support" title="Permalink to this heading">¶</a></h2>
<p>Having initial support for vY only means that PHP CS Fixer can run on vY runtime and understand vY syntax.
It does not provide any explicit handling on style around vY syntax - that can be added on any moment later,
and it’s never-ending, open-ended process.</p>
</section>
</section>


          </div>
        </div>
      </main>
      <footer class="ft">
        <div class="content">
          The <a href="../_static/images/logo.png">logo</a> is &copy; 2010+ Sensio Labs
        </div>
      </footer>
  </body>
</html>